<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r120/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <title>Stats-212</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
      body{
        margin: 0;
        overflow: hidden;
      }

      canvas{
        background: red;
      }

    </style>
  </head>
  <body>

    <svg style="position:absolute; width:100%; height: 100%; left:0; top:0" viewBox="0 0 800 600">
      <style>
        #points, #assists, #rebounds {
          font: 30px sans-serif;
          cursor: pointer;
        }
        .rect{
          cursor: pointer;
        }
      </style>

      <linearGradient id="naran">
        <stop offset="0%"   style="stop-color:#830" />
        <stop offset="25%"  style="stop-color:#C70" />
        <stop offset="50%"  style="stop-color:#F90" />
        <stop offset="75%"  style="stop-color:#C70" />
        <stop offset="100%" style="stop-color:#A50" />
      </linearGradient>

      <rect x="80" y="15" width="200" height="80" fill="url(#naran)" fill-opacity="40" stroke="#111" rx="15" id="points"/>
      <text x="100" y="65" textLength="160" id=points fill="#222"> Points </text>
      <rect x="303" y="15" width="200" height="80" fill="url(#naran)" fill-opacity="40" stroke="#111" rx="15" id="assists"/>
      <text x="320" y="65" textLength="160" id=assists fill="#222"> Assists </text>
      <rect x="526" y="15" width="200" height="80" fill="url(#naran)" fill-opacity="40" stroke="#111" rx="15" id="rebounds"/>
      <text x="540" y="65" textLength="160" id=rebounds fill="#222"> Rebounds </text>

     <g class="rect">
      <rect x="125" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect0"/>
      <rect x="185" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect1"/>
      <rect x="245" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect2"/>
      <rect x="305" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect3"/>
      <rect x="360" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect4"/>
      <rect x="420" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect5"/>
      <rect x="475" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect6"/>
      <rect x="535" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect7"/>
      <rect x="590" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect8"/>
      <rect x="650" y="180" width="40" height="250" fill="#333" fill-opacity="0" stroke="#999" id="rect9"/>
     </g>
    </svg>


    <canvas id="myCanvas"></canvas>

    <script>
       var xpos = 280;
       var camera, scene, renderer;

       init();
       document.getElementById('points').addEventListener('click', function pointStats(){
         console.log("points");
         pointBalls = true;

         fetch('/stats/points', { method: 'GET'})
           .then(response => response.json())
           .then(data => {

             disp(data);

             for (i = 0; i < data.length; i++){
               ypos = data[i][2]/60-420;

               var ball = new THREE.SphereGeometry(10, 32, 32);
               var ballMaterial = new THREE.MeshLambertMaterial({color: 0xDD6600});
               var pointBall = new THREE.Mesh(ball, ballMaterial);

               pointBall.position.set(xpos - i*60.5, ypos, 0);
               scene.add(pointBall);
              // console.log(ypos);
              }

             renderer.render(scene, camera);
             });

       });

       document.getElementById('assists').addEventListener('click', function assistStats(){
         console.log("assists");
         assistBalls = true;

         fetch('/stats/assists', { method: 'GET'})
           .then(response => response.json())
           .then(data => {

             disp(data);

             for (i = 0; i < data.length; i++){
               ypos = data[i][3]/60-80;

               var ball = new THREE.SphereGeometry(10, 32, 32);
               var ballMaterial = new THREE.MeshLambertMaterial({color: 0xDD6600});
               var assistBall = new THREE.Mesh(ball, ballMaterial);

               assistBall.position.set(xpos - i*60.5, ypos, 0);
               scene.add(assistBall);
               //console.log(ypos);
              }

             renderer.render(scene, camera);
             });

       });

       document.getElementById('rebounds').addEventListener('click', function reboundStats(){
         console.log("rebounds");
         assistBalls = true;

         fetch('/stats/rebounds', { method: 'GET'})
           .then(response => response.json())
           .then(data => {

             disp(data);

             for (i = 0; i < data.length; i++){
               ypos = data[i][4]/60-180;

               var ball = new THREE.SphereGeometry(10, 32, 32);
               var ballMaterial = new THREE.MeshLambertMaterial({color: 0xDD6600});
               var reboundBall = new THREE.Mesh(ball, ballMaterial);

               reboundBall.position.set(xpos - i*60.5, ypos, 0);
               scene.add(reboundBall);
               //console.log(ypos);
              }

             renderer.render(scene, camera);
             });

       });
       // fetch('/stats/rebounds', { method: 'GET'})
       //   .then(response => response.json())
       //   .then(data => {
       //     init(data);
       //     disp(data);
       //
       //
       //
       //     renderer.render(scene, camera);
       //     });


       function init() {
         console.log()

         renderer = new THREE.WebGLRenderer({canvas: document.getElementById('myCanvas'), antialias: true});
         renderer.setClearColor(0x282222);
         renderer.setPixelRatio(window.devicePixelRatio);
         renderer.setSize(window.innerWidth, window.innerHeight);

         // create camera
         camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 3000);
         camera.position.z = 1000;
         camera.position.y = 165;
         //create scene
         scene = new THREE.Scene();

         //lights

         var spotLight1 = new THREE.SpotLight(0xFFCCC2, 1);
         spotLight1.penumbra = 1.0;
         spotLight1.position.set(-200, 480, 0);
         scene.add(spotLight1);

         var spotLight2 = new THREE.SpotLight(0xFFCCC2, 1);
         spotLight2.penumbra = 1.0;
         spotLight2.position.set(200, 480, 0);
         scene.add(spotLight2);


         // 3D assets

         var ground = new THREE.BoxGeometry(800, 10, 400);
         var groundMaterial = new THREE.MeshStandardMaterial({
         color: 0xC1B446,
         roughness: 0.5,
         metalness: 0.9,
         });

         var groundMesh = new THREE.Mesh(ground, groundMaterial);

         var pole = new THREE.BoxGeometry(5, 180, 5);
         var poleMaterial = new THREE.MeshLambertMaterial({color: 0xF3FFE2});
         var poleMesh = new THREE.Mesh(pole, poleMaterial);
         poleMesh.position.set(380, 90, 0);

         var poleMesh1 = new THREE.Mesh(pole, poleMaterial);
         poleMesh1.position.set(-380, 90, 0);

         var backboard = new THREE.BoxGeometry(2, 50, 90);
         var backMaterial = new THREE.MeshLambertMaterial({color: 0xF3FFE2});
         var backMesh = new THREE.Mesh(backboard, backMaterial);
         backMesh.position.set(-377.5, 160, 0);

         var backMesh1 = new THREE.Mesh(backboard, backMaterial);
         backMesh1.position.set(377.5, 160, 0);

         var hoop = new THREE.TorusGeometry(10, 1, 20, 80);
         var hoopMaterial = new THREE.MeshLambertMaterial({color: 0xF3FFE2});
         var hoopMesh = new THREE.Mesh(hoop, hoopMaterial);
         hoopMesh.position.set(-368, 145, 0);
         hoopMesh.rotation.set(7.9, 0, 0);

         var hoopMesh1 = new THREE.Mesh(hoop, hoopMaterial);
         hoopMesh1.position.set(368, 145, 0);
         hoopMesh1.rotation.set(7.9, 0, 0);

         scene.add(groundMesh);
         scene.add(poleMesh);
         scene.add(poleMesh1);
         scene.add(backMesh);
         scene.add(backMesh1);
         scene.add(hoopMesh);
         scene.add(hoopMesh1);

         for (i = 0; i < 10; i++){
           ypos = 50 //data[i][4]/60-180;

           var ball = new THREE.SphereGeometry(10, 32, 32);
           var ballMaterial = new THREE.MeshLambertMaterial({color: 0xDD6600});
           var ballMesh = new THREE.Mesh(ball, ballMaterial);


           ballMesh.position.set(xpos - i*60.5, ypos, 0);
           scene.add(ballMesh);

           renderer.render(scene, camera);


          }


         //renderer.render(scene, camera);
       }


        // balls

   /*
        fetch('/stats/points', { method: 'GET'})
        .then(response => response.json())
        .then(data => {
          for (i = 0; i < data.length; i++){
            ypos = data[i][2]/60-420;

            var ball = new THREE.SphereGeometry(10, 32, 32);
            var ballMaterial = new THREE.MeshLambertMaterial({color: 0xDD6600});
            var ballMesh = new THREE.Mesh(ball, ballMaterial);

            ballMesh.position.set(xpos - i*60.5, ypos, 0);
            scene.add(ballMesh);
            console.log(ypos);
           }
           renderer.render(scene, camera);
          });
    */

          // fetch('/stats/assists', { method: 'GET'})
          // .then(response => response.json())
          // .then(data => {
          //   for (i = 0; i < data.length; i++){
          //     ypos = data[i][3]/60-80;
          //
          //     var ball = new THREE.SphereGeometry(10, 32, 32);
          //     var ballMaterial = new THREE.MeshLambertMaterial({color: 0xDD6600});
          //     var ballMesh = new THREE.Mesh(ball, ballMaterial);
          //
          //     ballMesh.position.set(xpos - i*60.5, ypos, 0);
          //     scene.add(ballMesh);
          //     console.log(ypos);
          //    }
          //    renderer.render(scene, camera);
          //   });

      function onWindowResize() {

  			camera.aspect = window.innerWidth / window.innerHeight;
  			camera.updateProjectionMatrix();

  			renderer.setSize( window.innerWidth, window.innerHeight );
      }

      function disp(data){
      document.getElementById('rect9').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[0]);
        }
      });
      document.getElementById('rect8').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[1]);
        }
      });
      document.getElementById('rect7').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[2]);
        }
      });
      document.getElementById('rect6').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[3]);
        }
      });
      document.getElementById('rect5').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[4]);
        }
      });
      document.getElementById('rect4').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[5]);
        }
      });
      document.getElementById('rect3').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[6]);
        }
      });
      document.getElementById('rect2').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[7]);
        }
      });
      document.getElementById('rect1').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[8]);
        }
      });
      document.getElementById('rect0').addEventListener('mouseover', function rec(){
        for (i = 0; i < data.length; i++){
          console.log(data[9]);
        }
      });
    }

    </script>

    <script>

    </script>

  </body>
</html>
